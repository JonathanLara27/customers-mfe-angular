<section class="bg-gray-10">
    <app-header-page [title]="title() + ' Lista'" [subtitle]="subtitle()"></app-header-page>

    <section class="toggle-view-container">
        <button mat-raised-button (click)="navigateToTableView()">Ir a la tabla</button>
    </section>

    <section class="mr-4 ml-4 mat-elevation-z8 border-radius-20 bg-white">
        <mat-paginator [showFirstLastButtons]="true" [pageSizeOptions]="[5, 10, 25, 50]" [length]="total()"
            class="border-radius-20">
        </mat-paginator>

        <section class="p-3 container-items">
            @defer (when !isLoading()) {
                @if (isLoading()) {
                 <ng-container *ngTemplateOutlet="skeleton"></ng-container>
                } @else {
                    <div class="customer-list">
                        @for (item of customers(); track $index) {
                            <mat-card class="customer-card">
                                <mat-icon>person</mat-icon>
                                <div class="customer-info">
                                    <div class="customer-name">{{ item.name }}</div>
                                    <div class="customer-email">{{ item.email }}</div>
                                    <div class="customer-phone">
                                        <mat-icon>phone</mat-icon>
                                        <span>{{ item.phone || 'â€”' }}</span>
                                    </div>
                                </div>
                            </mat-card>
                     }
                    </div>
                }
            } @placeholder {
                <ng-container *ngTemplateOutlet="skeleton"></ng-container>
            }
        </section>

    </section>
</section>

<!-- === SKELETON TEMPLATE === -->
<ng-template #skeleton>
    <div class="skeleton-container">
        @for (item of [].constructor(pageSize()); track $index) {
        <div class="skeleton-item">
            <div class="skeleton-avatar"></div>
            <div class="skeleton-text-group">
                <div class="skeleton-line short"></div>
                <div class="skeleton-line long"></div>
                <div class="skeleton-line medium"></div>
            </div>
        </div>
        }
    </div>
</ng-template>